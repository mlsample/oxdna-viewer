(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{25731:(t,e,o)=>{"use strict";o.d(e,{F:()=>n});var r=o(91950);async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.fr,a=await fetch("".concat(o).concat(t),{...e,headers:{"Content-Type":"application/json",...e.headers}});if(!a.ok){let e=await a.text();throw console.error("API Error (".concat(a.status,") on ").concat(t,": ").concat(e)),Error("API request failed: ".concat(a.status," ").concat(a.statusText," - ").concat(e))}let n=a.headers.get("content-type");return n&&n.includes("application/json")?a.json():a.text()}let n={startJob:t=>{let e=new FormData;Object.keys(t).forEach(o=>{let r=t[o];"simulationType"===o?e.append("MD",String("MD"===r)):r instanceof File?e.append(o,r,r.name):null!=r&&e.append(o,String(r))});let o=localStorage.getItem("token");return o?fetch("".concat(r.fr,"/startJobMultipart"),{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(o)}}).then(async t=>{if(!t.ok){let e=await t.text();throw console.error("API Error (".concat(t.status,") on /startJobMultipart: ").concat(e)),Error("API request failed: ".concat(t.status," ").concat(t.statusText," - ").concat(e))}return t.text()}):Promise.reject(Error("No authentication token found."))},runEnhancedSamplingJob:t=>{let e=new FormData;Object.keys(t).forEach(o=>{let r=t[o];"samplingType"!==o&&("proteinFile"===o&&r instanceof File?e.append("protein",r,r.name):r instanceof File?e.append(o,r,r.name):null!=r&&e.append(o,String(r)))});let o=localStorage.getItem("token");return o?fetch("".concat(r.fr,"/runOxdnaUmbrella"),{method:"POST",body:e,headers:{Authorization:"Bearer ".concat(o)}}).then(async t=>{if(!t.ok){let e=await t.text();throw console.error("API Error (".concat(t.status,") on /runOxdnaUmbrella: ").concat(e)),Error("API request failed: ".concat(t.status," ").concat(t.statusText," - ").concat(e))}return t.text()}):Promise.reject(Error("No authentication token found."))},startAnalysisJob:t=>{let e=localStorage.getItem("token");if(!e)return Promise.reject(Error("No authentication token found."));let o=new FormData;return Object.keys(t).forEach(e=>{let r=t[e];r instanceof File?o.append(e,r,r.name):null!=r&&o.append(e,String(r))}),fetch("".concat(r.fr,"/startAnalysisMultipart"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:o}).then(async t=>{if(!t.ok){let e=await t.text();throw console.error("API Error (".concat(t.status,") on /startAnalysisMultipart: ").concat(e)),Error("API request failed: ".concat(t.status," ").concat(t.statusText," - ").concat(e))}return t.text()})},stopJob:t=>{let e=localStorage.getItem("token");return e?a("/stopJob/".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}):Promise.reject(Error("No authentication token found."))},resumeJob:t=>{let e=localStorage.getItem("token");return e?a("/resumeJob/".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}):Promise.reject(Error("No authentication token found."))},deleteJob:t=>{let e=localStorage.getItem("token");return e?a("/deleteJob/".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}):Promise.reject(Error("No authentication token found."))},getJobStatus:t=>{let e=localStorage.getItem("token");return e?a("/getJobStatus/".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}):Promise.reject(Error("No authentication token found."))},getJobsByUser:async t=>{let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found.");try{console.log("2");let t=await a("/getJobs",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!t||"object"!=typeof t)return console.warn("getJobsByUser received non-object response:",t),[];return Object.values(t)}catch(e){if(console.error("Failed to get jobs for user ".concat(t,":"),e),e instanceof Error&&e.message.includes("404"))return[];throw e}},getEnergyData:async t=>a("/energy/".concat(t,"/0/3"),{method:"GET"}),getServerResources:async()=>Object.entries(await a("/getResources",{method:"GET"})).map((t,e)=>{let[o,r]=t;return{id:o,name:"Server ".concat(e+1),CPUavail:r.CPUavail,GPUavail:r.GPUavail,TotalRam:r.totalRAM,RAMavail:r.RAMavail,totalCPU:r.totalCPU}}),downloadFile:async(t,e)=>{let o=localStorage.getItem("token");if(!o)throw Error("No authentication token found.");let a=await fetch("".concat(r.fr,"/download/").concat(t,"/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(o)}});if(!a.ok){let o=await a.text();throw console.error("Download Error (".concat(a.status,") for ").concat(t,"/").concat(e,": ").concat(o)),Error("Download failed: ".concat(a.status," ").concat(a.statusText," - ").concat(o))}return a.blob()},downloadAllFiles:async t=>{let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found.");let o=await fetch("".concat(r.fr,"/downloadAll/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!o.ok){let e=await o.text();throw console.error("Download All Error (".concat(o.status,") for ").concat(t,": ").concat(e)),Error("Download all failed: ".concat(o.status," ").concat(o.statusText," - ").concat(e))}return o.blob()},listJobFiles:async t=>{let e=localStorage.getItem("token");if(!e)throw Error("No authentication token found.");return Object.values(await a("/list/".concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(e)}})).sort()},getJobFileContent:async(t,e)=>(await n.downloadFile(t,e)).text(),registerUser:async t=>a("/auth/signup",{method:"POST",body:JSON.stringify({firstName:t.firstName,lastName:t.lastName,email:t.email,institutionName:t.instituteName,password:t.passwordLogin})},r.k1),loginUser:async(t,e)=>a("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:e})},r.k1),getUserProfile:async()=>{let t=localStorage.getItem("token");if(!t)throw Error("No authentication token found.");return console.log(t),a("/auth/profile",{method:"POST",headers:{Authorization:"Bearer ".concat(t)}},r.k1)}}},30347:()=>{},40283:(t,e,o)=>{"use strict";o.d(e,{A:()=>d,AuthProvider:()=>l});var r=o(95155),a=o(12115),n=o(35695),s=o(25731),i=o(58801);let c=(0,a.createContext)(void 0),l=t=>{let{children:e}=t,[o,l]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),f=(0,n.useRouter)();(0,a.useEffect)(()=>{(async()=>{let t=localStorage.getItem("token");if(t)try{let e=(0,i.decode)(t);if(1e3*e.exp>Date.now()){let t=await s.F.getUserProfile();l(t)}else localStorage.removeItem("token"),l(null)}catch(t){console.error("Token verification failed:",t),localStorage.removeItem("token"),l(null)}u(!1)})()},[]);let h=async t=>{try{return await s.F.registerUser(t),await m(t.email,t.passwordLogin)}catch(t){return console.error("Registration failed:",t),!1}},m=async(t,e)=>{u(!0);try{let o=await s.F.loginUser(t,e);if(o.token){localStorage.setItem("token",o.token);let t=await s.F.getUserProfile();return l(t),f.push("/job-status"),u(!1),!0}throw Error("Login failed: No token received")}catch(t){return console.error("Login failed:",t),localStorage.removeItem("token"),l(null),u(!1),!1}};return(0,r.jsx)(c.Provider,{value:{user:o,isAuthenticated:!!o,register:h,login:m,logout:()=>{l(null),localStorage.removeItem("token"),f.push("/login")},loading:d},children:e})},d=()=>{let t=(0,a.useContext)(c);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},41305:(t,e,o)=>{Promise.resolve().then(o.t.bind(o,76196,23)),Promise.resolve().then(o.t.bind(o,30347,23)),Promise.resolve().then(o.bind(o,52558)),Promise.resolve().then(o.bind(o,40283))},52558:(t,e,o)=>{"use strict";o.d(e,{Toaster:()=>v});var r=o(95155),a=o(87481),n=o(12115),s=o(26621),i=o(74466),c=o(25318),l=o(59434);let d=s.Kq,u=n.forwardRef((t,e)=>{let{className:o,...a}=t;return(0,r.jsx)(s.LM,{ref:e,className:(0,l.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",o),...a})});u.displayName=s.LM.displayName;let f=(0,i.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),h=n.forwardRef((t,e)=>{let{className:o,variant:a,...n}=t;return(0,r.jsx)(s.bL,{ref:e,className:(0,l.cn)(f({variant:a}),o),...n})});h.displayName=s.bL.displayName,n.forwardRef((t,e)=>{let{className:o,...a}=t;return(0,r.jsx)(s.rc,{ref:e,className:(0,l.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",o),...a})}).displayName=s.rc.displayName;let m=n.forwardRef((t,e)=>{let{className:o,...a}=t;return(0,r.jsx)(s.bm,{ref:e,className:(0,l.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",o),"toast-close":"",...a,children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})});m.displayName=s.bm.displayName;let p=n.forwardRef((t,e)=>{let{className:o,...a}=t;return(0,r.jsx)(s.hE,{ref:e,className:(0,l.cn)("text-sm font-semibold",o),...a})});p.displayName=s.hE.displayName;let g=n.forwardRef((t,e)=>{let{className:o,...a}=t;return(0,r.jsx)(s.VY,{ref:e,className:(0,l.cn)("text-sm opacity-90",o),...a})});function v(){let{toasts:t}=(0,a.dj)();return(0,r.jsxs)(d,{children:[t.map(function(t){let{id:e,title:o,description:a,action:n,...s}=t;return(0,r.jsxs)(h,{...s,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[o&&(0,r.jsx)(p,{children:o}),a&&(0,r.jsx)(g,{children:a})]}),n,(0,r.jsx)(m,{})]},e)}),(0,r.jsx)(u,{})]})}g.displayName=s.VY.displayName},87481:(t,e,o)=>{"use strict";o.d(e,{dj:()=>f});var r=o(12115);let a=0,n=new Map,s=t=>{if(n.has(t))return;let e=setTimeout(()=>{n.delete(t),d({type:"REMOVE_TOAST",toastId:t})},1e6);n.set(t,e)},i=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:o}=e;return o?s(o):t.toasts.forEach(t=>{s(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===o||void 0===o?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},c=[],l={toasts:[]};function d(t){l=i(l,t),c.forEach(t=>{t(l)})}function u(t){let{...e}=t,o=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:o});return d({type:"ADD_TOAST",toast:{...e,id:o,open:!0,onOpenChange:t=>{t||r()}}}),{id:o,dismiss:r,update:t=>d({type:"UPDATE_TOAST",toast:{...t,id:o}})}}function f(){let[t,e]=r.useState(l);return r.useEffect(()=>(c.push(e),()=>{let t=c.indexOf(e);t>-1&&c.splice(t,1)}),[t]),{...t,toast:u,dismiss:t=>d({type:"DISMISS_TOAST",toastId:t})}}}},t=>{var e=e=>t(t.s=e);t.O(0,[888,268,277,340,24,887,509,441,303,358],()=>e(41305)),_N_E=t.O()}]);