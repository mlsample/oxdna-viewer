(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{10549:(e,t,s)=>{"use strict";s.d(t,{$m:()=>d,As:()=>c,nD:()=>o,ub:()=>u});var n=s(95155),r=s(12115),i=s(23478),l=s(79556),a=s(59434);let o=i.bL,c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.q7,{ref:t,className:(0,a.cn)("border-b",s),...r})});c.displayName="AccordionItem";let d=r.forwardRef((e,t)=>{let{className:s,children:r,...o}=e;return(0,n.jsx)(i.Y9,{className:"flex",children:(0,n.jsxs)(i.l9,{ref:t,className:(0,a.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...o,children:[r,(0,n.jsx)(l.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=i.l9.displayName;let u=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,n.jsx)(i.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:(0,n.jsx)("div",{className:(0,a.cn)("pb-4 pt-0",s),children:r})})});u.displayName=i.UC.displayName},22346:(e,t,s)=>{"use strict";s.d(t,{Separator:()=>a});var n=s(95155),r=s(12115),i=s(87489),l=s(59434);let a=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:a=!0,...o}=e;return(0,n.jsx)(i.b,{ref:t,decorative:a,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...o})});a.displayName=i.b.displayName},27516:(e,t,s)=>{Promise.resolve().then(s.bind(s,58719))},30356:(e,t,s)=>{"use strict";s.d(t,{C:()=>c,z:()=>o});var n=s(95155),r=s(12115),i=s(54059),l=s(70154),a=s(59434);let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.bL,{className:(0,a.cn)("grid gap-2",s),...r,ref:t})});o.displayName=i.bL.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.q7,{ref:t,className:(0,a.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,n.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,n.jsx)(l.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=i.q7.displayName},46102:(e,t,s)=>{"use strict";s.d(t,{Bc:()=>a,ZI:()=>d,k$:()=>c,m_:()=>o});var n=s(95155),r=s(12115),i=s(89613),l=s(59434);let a=i.Kq,o=i.bL,c=i.l9,d=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...a}=e;return(0,n.jsx)(i.UC,{ref:t,sideOffset:r,className:(0,l.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})});d.displayName=i.UC.displayName},58719:(e,t,s)=>{"use strict";s.d(t,{default:()=>M});var n=s(95155),r=s(12115),i=s(90221),l=s(62177),a=s(55594),o=s(30285),c=s(17759),d=s(62523),u=s(80333),p=s(30356),m=s(10549),x=s(40283),h=s(25731),f=s(91950),j=s(87481),b=s(16923),g=s(68718),y=s(73672),v=s(66695),w=s(22346),N=s(80534),C=s(91540),R=s(67063),I=s(46102);let _=a.Ik({jobName:a.Yj().optional(),samplingType:a.k5(["Umbrella","ForwardFlux"],{required_error:"You must select a sampling type."}),topology:a.bz().refine(e=>e instanceof File,"Topology file is required."),configuration:a.bz().refine(e=>e instanceof File,"Configuration file is required."),testPreEq:a.zM(),nucleotideIndexes0:a.Yj().min(1,"This field is required."),nucleotideIndexes1:a.Yj().min(1,"This field is required."),xmin:a.au.number(),xmax:a.au.number(),steps:a.au.number().int().positive("Must be a positive number"),cpuRun:a.zM(),T:a.Yj().min(1,"Temperature is required."),saltConc:a.au.number(),nWindows:a.au.number().int().positive("Must be a positive number"),stiff:a.au.number(),cpus:a.au.number().int().positive("Must be a positive number"),protein:a.bz().optional(),sequenceDependent:a.zM(),pullingSteps:a.au.number().int().positive("Must be a positive number"),eqSteps:a.au.number().int().positive("Must be a positive number"),meltingTemperature:a.zM(),forceFile:a.bz().optional()});function M(){let{user:e}=(0,x.A)(),{toast:t}=(0,j.dj)(),[s,a]=r.useState(!1),M=(0,l.mN)({resolver:(0,i.u)(_),defaultValues:f.eg});r.useEffect(()=>{let e=sessionStorage.getItem("enhancedSamplingForm");if(e){let t=Object.entries(JSON.parse(e)).reduce((e,t)=>{let[s,n]=t;return["topology","configuration","protein","forceFile"].includes(s)||(e[s]=n),e},{});M.reset(t)}},[M.reset]),r.useEffect(()=>{let e=M.watch(e=>{let t={...e};delete t.topology,delete t.configuration,delete t.protein,delete t.forceFile,sessionStorage.setItem("enhancedSamplingForm",JSON.stringify(t))});return()=>e.unsubscribe()},[M.watch]);let S=async e=>{var s;let n=null==(s=e.target.files)?void 0:s[0];if(n)try{let e=await n.text(),s=N.Hh(e);s.jobName&&M.setValue("jobName",s.jobName),s.nucleotide_indexes_0&&M.setValue("nucleotideIndexes0",s.nucleotide_indexes_0),s.nucleotide_indexes_1&&M.setValue("nucleotideIndexes1",s.nucleotide_indexes_1),s.xmin&&M.setValue("xmin",s.xmin),s.xmax&&M.setValue("xmax",s.xmax),s.stiff&&M.setValue("stiff",s.stiff),s.celcius&&M.setValue("T",String(s.celcius)),s.molarity&&M.setValue("saltConc",s.molarity),s.sequence_dependent&&M.setValue("sequenceDependent",s.sequence_dependent),s.pulling_steps&&M.setValue("pullingSteps",s.pulling_steps),s.equilibration_steps&&M.setValue("eqSteps",s.equilibration_steps),s.production_steps&&M.setValue("steps",s.production_steps),s.test_pulling&&M.setValue("testPreEq",s.test_pulling),s.cpu_run&&M.setValue("cpuRun",s.cpu_run),s.n_cpus&&M.setValue("cpus",s.n_cpus),s.n_windows&&M.setValue("nWindows",s.n_windows),t({title:"YAML file loaded",description:"Form fields have been populated from the uploaded YAML file."})}catch(e){console.error("Error parsing YAML file:",e),t({title:"Error loading YAML file",description:"Could not parse the YAML file. Please check the file format.",variant:"destructive"})}},q=M.watch("nWindows");r.useEffect(()=>{q&&q>0&&M.setValue("cpus",q)},[q,M.setValue]);let z=async(e,s)=>{var n;let r=null==(n=e.target.files)?void 0:n[0];if(r&&(M.setValue(s,r,{shouldValidate:!0}),"topology"===s))try{let e=(await r.text()).split("\n")[0].trim(),s=parseInt(e.split(" ")[0]);if(!isNaN(s)){let e=s>500;M.setValue("cpuRun",!e),t({title:"GPU Setting Updated",description:"Detected ".concat(s," nucleotides. GPU ").concat(e?"enabled":"disabled"," automatically.")})}}catch(e){console.error("Error reading topology file:",e)}};async function E(s){if(!e)return void t({title:"Authentication Error",description:"You must be logged in to submit a job.",variant:"destructive"});let n=parseInt(s.T,10);if(isNaN(n))return void t({title:"Invalid Temperature",description:"Please enter a valid number for temperature.",variant:"destructive"});let r={...s,userID:e.id,T:n,cpus:s.cpus,topology:s.topology,configuration:s.configuration,protein:s.protein instanceof File?s.protein:void 0,forceFile:s.forceFile instanceof File?s.forceFile:void 0};try{let e=await h.F.runEnhancedSamplingJob(r);t({title:"Enhanced Sampling Job Submitted",description:"Job submitted. Backend responded with: ".concat(e)}),M.reset(f.eg),sessionStorage.removeItem("enhancedSamplingForm")}catch(e){console.error("Failed to submit enhanced sampling job:",e),t({title:"Submission Failed",description:e.message||"An unknown error occurred.",variant:"destructive"})}}let k=M.watch("topology"),F=M.watch("configuration"),B=M.watch("nucleotideIndexes0"),V=M.watch("nucleotideIndexes1");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c.lV,{...M,children:(0,n.jsxs)("form",{onSubmit:M.handleSubmit(E),className:"space-y-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)(v.Zp,{children:[(0,n.jsx)(v.aR,{children:(0,n.jsx)(v.ZB,{className:"font-headline text-lg",children:"Required Parameters"})}),(0,n.jsxs)(v.Wu,{className:"space-y-4",children:[(0,n.jsx)(c.zB,{control:M.control,name:"jobName",render:e=>{var t;let{field:s}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Job Name"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"A descriptive name for your job",...s,value:null!=(t=s.value)?t:""})}),(0,n.jsx)(c.Rr,{children:"Provide a descriptive name for your job to easily identify it in your job history."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"samplingType",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{className:"space-y-3",children:[(0,n.jsx)(c.lR,{children:"Sampling Type"}),(0,n.jsx)(c.MJ,{children:(0,n.jsxs)(p.z,{onValueChange:t.onChange,defaultValue:t.value,className:"flex space-x-4",children:[(0,n.jsxs)(c.eI,{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.MJ,{children:(0,n.jsx)(p.C,{value:"Umbrella"})}),(0,n.jsx)(c.lR,{className:"font-normal",children:"Umbrella Sampling"})]}),(0,n.jsxs)(c.eI,{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.MJ,{children:(0,n.jsx)(p.C,{value:"ForwardFlux"})}),(0,n.jsx)(c.lR,{className:"font-normal",children:"Forward Flux"})]})]})}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"topology",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Topology File"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>z(e,"topology")})}),(0,n.jsx)(c.Rr,{children:"Upload the oxDNA topology file (`.top`) that defines the structure and connectivity of your system."}),(0,n.jsx)(c.C5,{})]})}),(0,n.jsx)(c.zB,{control:M.control,name:"configuration",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Configuration File"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>z(e,"configuration")})}),(0,n.jsx)(c.Rr,{children:"Upload an equilibrated oxDNA conformation file (`.dat`) representing the starting state of your simulation."}),(0,n.jsx)(c.C5,{})]})}),(0,n.jsx)(c.zB,{control:M.control,name:"nucleotideIndexes0",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Nucleotide Indexes 0"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"10, 11, 12, 16, 9",...t})}),(0,n.jsx)(c.Rr,{children:"Enter the comma-separated particle IDs (from oxView) that define the first group for distance measurement (center of mass 0)."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"nucleotideIndexes1",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Nucleotide Indexes 1"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"14, 21, 30",...t})}),(0,n.jsx)(c.Rr,{children:"Enter the comma-separated particle IDs (from oxView) that define the second group for distance measurement (center of mass 1)."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(c.zB,{control:M.control,name:"xmin",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"X Minimum"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.01",...t})}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"xmax",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"X Maximum"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.01",...t})}),(0,n.jsx)(c.C5,{})]})}})]}),(0,n.jsx)(c.zB,{control:M.control,name:"testPreEq",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(c.lR,{children:"Test Pre-Equilibration"}),(0,n.jsx)(c.Rr,{children:"Perform a short, non-equilibrium pulling simulation to test the reaction coordinate. Highly recommended."})]}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(u.d,{checked:t.value,onCheckedChange:t.onChange})})]})}})]})]})}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(v.Zp,{children:[(0,n.jsx)(v.aR,{children:(0,n.jsx)(v.ZB,{className:"font-headline text-lg",children:"Key Arguments"})}),(0,n.jsxs)(v.Wu,{className:"space-y-4",children:[(0,n.jsx)(c.zB,{control:M.control,name:"steps",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Production Steps"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...t})}),(0,n.jsx)(c.Rr,{children:"The number of simulation steps for the production run in each window. More steps lead to better statistics but require more computation time."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"T",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Temperature (\xb0C)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"e.g., 37",...t})}),(0,n.jsx)(c.Rr,{children:"The temperature (in Celsius) at which the simulation will be performed. "}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"saltConc",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Salt Concentration (M)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.01",...t})}),(0,n.jsx)(c.Rr,{children:"Salt concentration in NaCl M (molarity). Affects electrostatic interactions."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"nWindows",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Number of Windows"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...t})}),(0,n.jsx)(c.Rr,{children:"The number of parallel simulations (replicas) to run along the reaction coordinate. "}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"stiff",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Stiffness of Spring (k)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.1",...t})}),(0,n.jsx)(c.Rr,{children:"The spring constant for the harmonic restraint. Higher values create a stiffer potential, more tightly confining the sampling in each window."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"cpus",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"CPUs"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"1",min:"1",...t})}),(0,n.jsx)(c.Rr,{children:"Number of CPUs to use. This is automatically set to the number of windows, as each window runs on a separate CPU."}),(0,n.jsx)(c.C5,{})]})}})]})]}),(0,n.jsx)(m.nD,{type:"single",collapsible:!0,className:"w-full",children:(0,n.jsx)(m.As,{value:"item-1",children:(0,n.jsxs)(v.Zp,{children:[(0,n.jsx)(m.$m,{className:"p-6",children:(0,n.jsx)(v.aR,{className:"p-0",children:(0,n.jsx)(v.ZB,{className:"font-headline text-lg",children:"Advanced Parameters"})})}),(0,n.jsx)(m.ub,{children:(0,n.jsxs)(v.Wu,{className:"space-y-4 pt-0",children:[(0,n.jsx)(c.zB,{control:M.control,name:"pullingSteps",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Pulling Steps"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...t})}),(0,n.jsx)(c.Rr,{children:"Number of steps for the initial, non-equilibrium pulling phase to generate starting conformations for each window."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"eqSteps",render:e=>{let{field:t}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Equilibrium Steps"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...t})}),(0,n.jsx)(c.Rr,{children:"Number of equilibration steps for each window"}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:M.control,name:"protein",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Protein File (Optional)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>z(e,"protein")})}),(0,n.jsx)(c.Rr,{children:"Upload a protein parameter file (`.par`) if your system includes a protein component to be simulated alongside the DNA."}),(0,n.jsx)(c.C5,{})]})}),(0,n.jsx)(c.zB,{control:M.control,name:"forceFile",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Force File (Optional)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>z(e,"forceFile")})}),(0,n.jsx)(c.Rr,{children:"Upload an oxDNA force file to apply additional external forces or restraints during the simulation."}),(0,n.jsx)(c.C5,{})]})})]})})]})})})]})]}),(0,n.jsx)(w.Separator,{}),(0,n.jsxs)("div",{className:"flex items-center gap-4 mt-8",children:[(0,n.jsxs)(o.$,{type:"button",variant:"outline",onClick:()=>{var e;return null==(e=document.getElementById("yaml-upload"))?void 0:e.click()},children:[(0,n.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Upload YAML"]}),(0,n.jsx)(d.p,{id:"yaml-upload",type:"file",accept:".yaml,.yml",onChange:S,className:"hidden"}),(0,n.jsxs)(o.$,{type:"button",variant:"outline",onClick:()=>{let e=M.getValues(),t={jobName:e.jobName,nucleotide_indexes_0:e.nucleotideIndexes0,nucleotide_indexes_1:e.nucleotideIndexes1,xmin:e.xmin,xmax:e.xmax,stiff:e.stiff,celcius:Number(e.T),molarity:e.saltConc,sequence_dependent:e.sequenceDependent,pulling_steps:e.pullingSteps,equilibration_steps:e.eqSteps,production_steps:e.steps,test_pulling:e.testPreEq,cpu_run:e.cpuRun,n_cpus:e.cpus,n_windows:e.nWindows},s=new Blob([N.Bh(t)],{type:"text/yaml;charset=utf-8"});(0,C.saveAs)(s,"config.yaml")},children:[(0,n.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Export YAML"]}),(0,n.jsxs)(o.$,{type:"submit",className:"w-full md:w-auto",children:[(0,n.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Submit Job"]})]})]})}),(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)(I.Bc,{children:(0,n.jsxs)(I.m_,{children:[(0,n.jsx)(I.k$,{asChild:!0,children:(0,n.jsx)("div",{style:{display:"inline-block"},children:(0,n.jsx)(o.$,{onClick:()=>a(!s),disabled:!k||!F,variant:"outline",style:{pointerEvents:k&&F?"auto":"none"},children:s?"Hide Preview":"oxView Preview"})})}),(!k||!F)&&(0,n.jsx)(I.ZI,{children:(0,n.jsx)("p",{children:"Please upload topology and configuration files to show oxView preview"})})]})}),s&&k&&F&&(0,n.jsx)(R.b,{topFile:k,datFile:F,nucleotideIndexes0:B,nucleotideIndexes1:V})]})]})}},67063:(e,t,s)=>{"use strict";s.d(t,{b:()=>a});var n=s(95155),r=s(12115),i=s(66695);let l="https://sulcgroup.github.io/oxdna-viewer/";function a(e){let{topFile:t,datFile:s,nucleotideIndexes0:a,nucleotideIndexes1:o,height:c="500px"}=e,d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{let e=d.current;if(!(null==e?void 0:e.contentWindow))return;let n=()=>{var n;let r=[{file:t,ext:"top"},{file:s,ext:"dat"}],i=r.map(e=>new Blob([e.file],{type:"text/plain"})),c=r.map(e=>e.ext),d=[];if(a){let e=a.split(",").map(e=>parseInt(e.trim(),10)).filter(e=>!isNaN(e));e.length>0&&d.push("colorElements(new THREE.Color(1, 0, 0), api.getElements([".concat(e.join(","),"]))"))}if(o){let e=o.split(",").map(e=>parseInt(e.trim(),10)).filter(e=>!isNaN(e));e.length>0&&d.push("colorElements(new THREE.Color(0, 0, 1), api.getElements([".concat(e.join(","),"]))"))}if(d.length>0){let e=d.join(";\n");console.log("Creating script file with content:",e),i.push(new Blob([e],{type:"application/javascript"})),c.push("js")}null==(n=e.contentWindow)||n.postMessage({message:"iframe_drop",files:i,ext:c,inbox_settings:["Monomer","Origin"]},l)};return e.addEventListener("load",n),()=>{e.removeEventListener("load",n)}},[t,s,a,o,d]),(0,n.jsxs)(i.Zp,{className:"mt-4",children:[(0,n.jsx)(i.aR,{children:(0,n.jsx)(i.ZB,{children:"Structure Preview"})}),(0,n.jsx)(i.Wu,{children:(0,n.jsx)("iframe",{ref:d,src:l,width:"100%",height:c,style:{border:"1px solid hsl(var(--border))"},title:"oxDNA Viewer"})})]})}},80333:(e,t,s)=>{"use strict";s.d(t,{d:()=>a});var n=s(95155),r=s(12115),i=s(4884),l=s(59434);let a=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,n.jsx)(i.bL,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-gray-300 transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input hover:shadow-md hover:scale-105 data-[state=checked]:shadow-lg data-[state=checked]:shadow-primary/25",s),...r,ref:t,children:(0,n.jsx)(i.zi,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-all duration-200 ease-in-out data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 data-[state=checked]:shadow-xl border border-gray-300")})})});a.displayName=i.bL.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[268,277,273,324,300,902,9,70,589,509,825,441,303,358],()=>t(27516)),_N_E=e.O()}]);