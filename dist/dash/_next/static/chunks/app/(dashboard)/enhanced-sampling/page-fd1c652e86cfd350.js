(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{10549:(e,r,s)=>{"use strict";s.d(r,{$m:()=>d,As:()=>c,nD:()=>o,ub:()=>u});var n=s(95155),t=s(12115),l=s(23478),i=s(79556),a=s(59434);let o=l.bL,c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,n.jsx)(l.q7,{ref:r,className:(0,a.cn)("border-b",s),...t})});c.displayName="AccordionItem";let d=t.forwardRef((e,r)=>{let{className:s,children:t,...o}=e;return(0,n.jsx)(l.Y9,{className:"flex",children:(0,n.jsxs)(l.l9,{ref:r,className:(0,a.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...o,children:[t,(0,n.jsx)(i.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});d.displayName=l.l9.displayName;let u=t.forwardRef((e,r)=>{let{className:s,children:t,...i}=e;return(0,n.jsx)(l.UC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,n.jsx)("div",{className:(0,a.cn)("pb-4 pt-0",s),children:t})})});u.displayName=l.UC.displayName},11275:(e,r,s)=>{"use strict";s.d(r,{X:()=>l});var n=s(12115),t=s(52712);function l(e){let[r,s]=n.useState(void 0);return(0,t.N)(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let n,t;if(!Array.isArray(r)||!r.length)return;let l=r[0];if("borderBoxSize"in l){let e=l.borderBoxSize,r=Array.isArray(e)?e[0]:e;n=r.inlineSize,t=r.blockSize}else n=e.offsetWidth,t=e.offsetHeight;s({width:n,height:t})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}s(void 0)},[e]),r}},22346:(e,r,s)=>{"use strict";s.d(r,{Separator:()=>a});var n=s(95155),t=s(12115),l=s(87489),i=s(59434);let a=t.forwardRef((e,r)=>{let{className:s,orientation:t="horizontal",decorative:a=!0,...o}=e;return(0,n.jsx)(l.b,{ref:r,decorative:a,orientation:t,className:(0,i.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",s),...o})});a.displayName=l.b.displayName},27516:(e,r,s)=>{Promise.resolve().then(s.bind(s,58719))},30356:(e,r,s)=>{"use strict";s.d(r,{C:()=>c,z:()=>o});var n=s(95155),t=s(12115),l=s(54059),i=s(70154),a=s(59434);let o=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,n.jsx)(l.bL,{className:(0,a.cn)("grid gap-2",s),...t,ref:r})});o.displayName=l.bL.displayName;let c=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,n.jsx)(l.q7,{ref:r,className:(0,a.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,n.jsx)(l.C1,{className:"flex items-center justify-center",children:(0,n.jsx)(i.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});c.displayName=l.q7.displayName},45503:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});var n=s(12115);function t(e){let r=n.useRef({value:e,previous:e});return n.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},58719:(e,r,s)=>{"use strict";s.d(r,{default:()=>N});var n=s(95155),t=s(12115),l=s(90221),i=s(62177),a=s(55594),o=s(30285),c=s(17759),d=s(62523),u=s(80333),x=s(30356),m=s(10549),p=s(40283),h=s(25731),j=s(91950),f=s(87481),b=s(73672),g=s(66695),v=s(22346);let y=a.Ik({jobName:a.Yj().optional(),samplingType:a.k5(["Umbrella","ForwardFlux"],{required_error:"You must select a sampling type."}),topology:a.bz().refine(e=>e instanceof File,"Topology file is required."),configuration:a.bz().refine(e=>e instanceof File,"Configuration file is required."),testPreEq:a.zM(),nucleotideIndexes0:a.Yj().min(1,"This field is required."),nucleotideIndexes1:a.Yj().min(1,"This field is required."),xmin:a.au.number(),xmax:a.au.number(),steps:a.au.number().int().positive("Must be a positive number"),smallSystem:a.zM(),T:a.Yj().min(1,"Temperature is required."),saltConc:a.au.number(),nWindows:a.au.number().int().positive("Must be a positive number"),stiff:a.au.number(),cpus:a.au.number().int().positive("Must be a positive number"),protein:a.bz().optional(),sequenceDependent:a.zM(),pullingSteps:a.au.number().int().positive("Must be a positive number"),eqSteps:a.au.number().int().positive("Must be a positive number"),meltingTemperature:a.zM(),forceFile:a.bz().optional()});function N(){let{user:e}=(0,p.A)(),{toast:r}=(0,f.dj)(),s=(0,i.mN)({resolver:(0,l.u)(y),defaultValues:j.eg}),a=s.watch("nWindows");t.useEffect(()=>{a&&a>0&&s.setValue("cpus",a)},[a,s.setValue]);let N=async(e,n)=>{var t;let l=null==(t=e.target.files)?void 0:t[0];if(l&&(s.setValue(n,l,{shouldValidate:!0}),"topology"===n))try{let e=(await l.text()).split("\n")[0].trim(),n=parseInt(e.split(" ")[0]);if(!isNaN(n)){let e=n>500;s.setValue("smallSystem",!e),r({title:"GPU Setting Updated",description:"Detected ".concat(n," nucleotides. GPU ").concat(e?"enabled":"disabled"," automatically.")})}}catch(e){console.error("Error reading topology file:",e)}};async function R(n){if(!e)return void r({title:"Authentication Error",description:"You must be logged in to submit a job.",variant:"destructive"});let t=parseInt(n.T,10);if(isNaN(t))return void r({title:"Invalid Temperature",description:"Please enter a valid number for temperature.",variant:"destructive"});let l={...n,userID:e.id,T:t,cpus:n.cpus,topology:n.topology,configuration:n.configuration,protein:n.protein instanceof File?n.protein:void 0,forceFile:n.forceFile instanceof File?n.forceFile:void 0};try{let e=await h.F.runEnhancedSamplingJob(l);r({title:"Enhanced Sampling Job Submitted",description:"Job submitted. Backend responded with: ".concat(e)}),s.reset(j.eg)}catch(e){console.error("Failed to submit enhanced sampling job:",e),r({title:"Submission Failed",description:e.message||"An unknown error occurred.",variant:"destructive"})}}return(0,n.jsx)(c.lV,{...s,children:(0,n.jsxs)("form",{onSubmit:s.handleSubmit(R),className:"space-y-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)(g.Zp,{children:[(0,n.jsx)(g.aR,{children:(0,n.jsx)(g.ZB,{className:"font-headline text-lg",children:"Required Parameters"})}),(0,n.jsxs)(g.Wu,{className:"space-y-4",children:[(0,n.jsx)(c.zB,{control:s.control,name:"jobName",render:e=>{var r;let{field:s}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Job Name"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"A descriptive name for your job",...s,value:null!=(r=s.value)?r:""})}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"samplingType",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{className:"space-y-3",children:[(0,n.jsx)(c.lR,{children:"Sampling Type"}),(0,n.jsx)(c.MJ,{children:(0,n.jsxs)(x.z,{onValueChange:r.onChange,defaultValue:r.value,className:"flex space-x-4",children:[(0,n.jsxs)(c.eI,{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.MJ,{children:(0,n.jsx)(x.C,{value:"Umbrella"})}),(0,n.jsx)(c.lR,{className:"font-normal",children:"Umbrella Sampling"})]}),(0,n.jsxs)(c.eI,{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.MJ,{children:(0,n.jsx)(x.C,{value:"ForwardFlux"})}),(0,n.jsx)(c.lR,{className:"font-normal",children:"Forward Flux"})]})]})}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"topology",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Topology File"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>N(e,"topology")})}),(0,n.jsx)(c.Rr,{children:"An oxDNA topology file (.top)"}),(0,n.jsx)(c.C5,{})]})}),(0,n.jsx)(c.zB,{control:s.control,name:"configuration",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Configuration File"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>N(e,"configuration")})}),(0,n.jsx)(c.Rr,{children:"An equilibrated oxDNA conformation (.dat)"}),(0,n.jsx)(c.C5,{})]})}),(0,n.jsx)(c.zB,{control:s.control,name:"nucleotideIndexes0",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Nucleotide Indexes 0"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"10, 11, 12, 16, 9",...r})}),(0,n.jsx)(c.Rr,{children:"Comma-separated oxView particle IDs for center of mass 0."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"nucleotideIndexes1",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Nucleotide Indexes 1"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"14, 21, 30",...r})}),(0,n.jsx)(c.Rr,{children:"Comma-separated oxView particle IDs for center of mass 1."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(c.zB,{control:s.control,name:"xmin",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"X Minimum"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.01",...r})}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"xmax",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"X Maximum"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.01",...r})}),(0,n.jsx)(c.C5,{})]})}})]}),(0,n.jsx)(c.zB,{control:s.control,name:"testPreEq",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(c.lR,{children:"Test Pre-Equilibration"}),(0,n.jsx)(c.Rr,{children:"Run a quick pulling simulation. (Recommended)"})]}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(u.d,{checked:r.value,onCheckedChange:r.onChange})})]})}})]})]})}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)(g.Zp,{children:[(0,n.jsx)(g.aR,{children:(0,n.jsx)(g.ZB,{className:"font-headline text-lg",children:"Key Arguments"})}),(0,n.jsxs)(g.Wu,{className:"space-y-4",children:[(0,n.jsx)(c.zB,{control:s.control,name:"steps",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Production Steps"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...r})}),(0,n.jsx)(c.Rr,{children:"Number of production simulation steps per window. Higher values improve statistical sampling but increase computation time."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"T",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Temperature"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{placeholder:"e.g., 37C",...r})}),(0,n.jsx)(c.Rr,{children:"Temperature in Celsius to run the simulation at."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"saltConc",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Salt Concentration (M)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.01",...r})}),(0,n.jsx)(c.Rr,{children:"Ionic strength of the solution in molarity. Typical physiological salt concentration is around 0.15 M."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"nWindows",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Number of Windows"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...r})}),(0,n.jsx)(c.Rr,{children:"Number of simulation windows (replicas)."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"stiff",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Stiffness of Spring (k)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"0.1",...r})}),(0,n.jsx)(c.Rr,{children:"Spring constant for harmonic restraint potential. Higher values restrict sampling more tightly around the reference values."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"cpus",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"CPUs"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",step:"1",min:"1",...r})}),(0,n.jsx)(c.Rr,{children:"Number of CPUs to be used for the simulation."}),(0,n.jsx)(c.C5,{})]})}})]})]}),(0,n.jsx)(m.nD,{type:"single",collapsible:!0,className:"w-full",children:(0,n.jsx)(m.As,{value:"item-1",children:(0,n.jsxs)(g.Zp,{children:[(0,n.jsx)(m.$m,{className:"p-6",children:(0,n.jsx)(g.aR,{className:"p-0",children:(0,n.jsx)(g.ZB,{className:"font-headline text-lg",children:"Advanced Parameters"})})}),(0,n.jsx)(m.ub,{children:(0,n.jsxs)(g.Wu,{className:"space-y-4 pt-0",children:[(0,n.jsx)(c.zB,{control:s.control,name:"pullingSteps",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Pulling Steps"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...r})}),(0,n.jsx)(c.Rr,{children:"Pre-equilibration pulling phase steps."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"eqSteps",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Equilibrium Steps"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"number",...r})}),(0,n.jsx)(c.Rr,{children:"Equilibration phase steps."}),(0,n.jsx)(c.C5,{})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"protein",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Protein Present File (Optional)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>N(e,"protein")})}),(0,n.jsx)(c.Rr,{children:"A protein .par file if your system contains a protein."}),(0,n.jsx)(c.C5,{})]})}),(0,n.jsx)(c.zB,{control:s.control,name:"forceFile",render:()=>(0,n.jsxs)(c.eI,{children:[(0,n.jsx)(c.lR,{children:"Force File (Optional)"}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(d.p,{type:"file",onChange:e=>N(e,"forceFile")})}),(0,n.jsx)(c.Rr,{children:"oxDNA force file for restrained umbrella sampling."}),(0,n.jsx)(c.C5,{})]})}),(0,n.jsx)(c.zB,{control:s.control,name:"sequenceDependent",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(c.lR,{children:"Sequence Dependant"}),(0,n.jsx)(c.Rr,{children:"If true, G-C bonds are stronger than A-T."})]}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(u.d,{checked:r.value,onCheckedChange:r.onChange})})]})}}),(0,n.jsx)(c.zB,{control:s.control,name:"smallSystem",render:e=>{let{field:r}=e;return(0,n.jsxs)(c.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[(0,n.jsxs)("div",{className:"space-y-0.5",children:[(0,n.jsx)(c.lR,{children:"Use GPU for the Small System"}),(0,n.jsx)(c.Rr,{children:"Disable GPU for systems with ≤ 500 nucleotides. Auto-set based on nucleotide count."})]}),(0,n.jsx)(c.MJ,{children:(0,n.jsx)(u.d,{checked:r.value,onCheckedChange:r.onChange})})]})}})]})})]})})})]})]}),(0,n.jsx)(v.Separator,{}),(0,n.jsx)("div",{className:"flex justify-end",children:(0,n.jsxs)(o.$,{type:"submit",size:"lg",disabled:s.formState.isSubmitting,children:[(0,n.jsx)(b.A,{className:"mr-2 h-5 w-5"}),s.formState.isSubmitting?"Submitting...":"Submit Job"]})})]})})}},61285:(e,r,s)=>{"use strict";s.d(r,{B:()=>o});var n,t=s(12115),l=s(52712),i=(n||(n=s.t(t,2)))["useId".toString()]||(()=>void 0),a=0;function o(e){let[r,s]=t.useState(i());return(0,l.N)(()=>{e||s(e=>e??String(a++))},[e]),e||(r?`radix-${r}`:"")}},79556:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});let n=(0,s(40157).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},80333:(e,r,s)=>{"use strict";s.d(r,{d:()=>a});var n=s(95155),t=s(12115),l=s(4884),i=s(59434);let a=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,n.jsx)(l.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-gray-300 transition-all duration-200 ease-in-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input hover:shadow-md hover:scale-105 data-[state=checked]:shadow-lg data-[state=checked]:shadow-primary/25",s),...t,ref:r,children:(0,n.jsx)(l.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-all duration-200 ease-in-out data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 data-[state=checked]:shadow-xl border border-gray-300")})})});a.displayName=l.bL.displayName},82284:(e,r,s)=>{"use strict";s.d(r,{N:()=>o});var n=s(12115),t=s(46081),l=s(6101),i=s(99708),a=s(95155);function o(e){let r=e+"CollectionProvider",[s,o]=(0,t.A)(r),[c,d]=s(r,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:r,children:s}=e,t=n.useRef(null),l=n.useRef(new Map).current;return(0,a.jsx)(c,{scope:r,itemMap:l,collectionRef:t,children:s})};u.displayName=r;let x=e+"CollectionSlot",m=n.forwardRef((e,r)=>{let{scope:s,children:n}=e,t=d(x,s),o=(0,l.s)(r,t.collectionRef);return(0,a.jsx)(i.DX,{ref:o,children:n})});m.displayName=x;let p=e+"CollectionItemSlot",h="data-radix-collection-item",j=n.forwardRef((e,r)=>{let{scope:s,children:t,...o}=e,c=n.useRef(null),u=(0,l.s)(r,c),x=d(p,s);return n.useEffect(()=>(x.itemMap.set(c,{ref:c,...o}),()=>void x.itemMap.delete(c))),(0,a.jsx)(i.DX,{...{[h]:""},ref:u,children:t})});return j.displayName=p,[{Provider:u,Slot:m,ItemSlot:j},function(r){let s=d(e+"CollectionConsumer",r);return n.useCallback(()=>{let e=s.collectionRef.current;if(!e)return[];let r=Array.from(e.querySelectorAll("[".concat(h,"]")));return Array.from(s.itemMap.values()).sort((e,s)=>r.indexOf(e.ref.current)-r.indexOf(s.ref.current))},[s.collectionRef,s.itemMap])},o]}},94315:(e,r,s)=>{"use strict";s.d(r,{jH:()=>l});var n=s(12115);s(95155);var t=n.createContext(void 0);function l(e){let r=n.useContext(t);return e||r||"ltr"}}},e=>{var r=r=>e(e.s=r);e.O(0,[268,277,273,24,521,199,509,825,441,303,358],()=>r(27516)),_N_E=e.O()}]);