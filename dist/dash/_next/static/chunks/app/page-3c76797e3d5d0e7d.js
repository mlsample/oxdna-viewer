(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{33792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var l=r(95155),o=r(12115),a=r(35695),s=r(40283),n=r(68856);function i(){let{isAuthenticated:e,loading:t}=(0,s.A)(),r=(0,a.useRouter)();return((0,o.useEffect)(()=>{t||(e?r.replace("/job-status"):r.replace("/login"))},[e,t,r]),t)?(0,l.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-background",children:(0,l.jsxs)("div",{className:"space-y-4 w-full max-w-md",children:[(0,l.jsx)(n.E,{className:"h-10 w-full"}),(0,l.jsx)(n.E,{className:"h-10 w-full"}),(0,l.jsx)(n.E,{className:"h-12 w-1/2 mx-auto"})]})}):null}},40283:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>u});var l=r(95155),o=r(12115),a=r(35695),s=r(25731),n=r(58801);let i=(0,o.createContext)(void 0),u=e=>{let{children:t}=e,[r,u]=(0,o.useState)(null),[c,d]=(0,o.useState)(!0),m=(0,a.useRouter)();(0,o.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(e)try{let t=(0,n.decode)(e);if(1e3*t.exp>Date.now()){let e=await s.F.getUserProfile();u(e)}else localStorage.removeItem("token"),u(null)}catch(e){console.error("Token verification failed:",e),localStorage.removeItem("token"),u(null)}d(!1)})()},[]);let f=async e=>{try{return await s.F.registerUser(e),await h(e.email,e.passwordLogin)}catch(e){return console.error("Registration failed:",e),!1}},h=async(e,t)=>{d(!0);try{let r=await s.F.loginUser(e,t);if(r.token){localStorage.setItem("token",r.token);let e=await s.F.getUserProfile();return u(e),m.push("/job-status"),d(!1),!0}throw Error("Login failed: No token received")}catch(e){return console.error("Login failed:",e),localStorage.removeItem("token"),u(null),d(!1),!1}};return(0,l.jsx)(i.Provider,{value:{user:r,isAuthenticated:!!r,register:f,login:h,logout:()=>{u(null),localStorage.removeItem("token"),m.push("/login")},loading:c},children:t})},c=()=>{let e=(0,o.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66424:(e,t,r)=>{Promise.resolve().then(r.bind(r,33792))},68856:(e,t,r)=>{"use strict";r.d(t,{E:()=>a});var l=r(95155),o=r(59434);function a(e){let{className:t,...r}=e;return(0,l.jsx)("div",{className:(0,o.cn)("animate-pulse rounded-md bg-muted",t),...r})}}},e=>{var t=t=>e(e.s=t);e.O(0,[268,277,340,512,441,303,358],()=>t(66424)),_N_E=e.O()}]);